--CPU_Enable(1, 0)
	--SobGroup_CreateSubSystem("Player_Ships1", "Vgr_MS_Module_PlatformControl")
	--local iRace = Player_GetRace(Universe_CurrentPlayer()) + 1   
  --dofilepath([[data:scripts/building and research/]] .. races[iRace][1] .. [[/build.lua]])
	--for z, iCount in build do
		--if iCount.ThingToBuild == "Vgr_MS_Module_PlatformControl" or
		   --iCount.ThingToBuild == "Vgr_C_Module_PlatformControl" or
       --iCount.ThingToBuild == "Vgr_WeaponPlatform_lance" then
			--local SubSystemId = GetSubSystemId(iCount.ThingToBuild)			
			--Subtitle_Message(iCount.ThingToBuild .. " " .. SubSystemId, 25)				
		--end		
		--if iCount.Type == Ship then
			--local ShipId = GetShipId(iCount.ThingToBuild)
			--if ShipId == E4589400 then
				--Subtitle_Message(iCount.ThingToBuild .. ShipId, 25)	    
			--end	
		--elseif iCount.Type == SubSystem then
			--local SubSystemId = GetSubSystemId(iCount.ThingToBuild)
			--if SubSystemId == E4589400 then
				--Subtitle_Message(iCount.ThingToBuild .. SubSystemId, 25)
			--end	
		--else  
		--end	
	--end	     

function Animate_MothershipDoorOpen()  
  SobGroup_AllowPassiveActionsAlways("hgn_mothership0", 1)
  SobGroup_SetMadState("hgn_mothership0", "NIS00")
  Sound_SpeechSubtitlePath("speech:missions/m_01/")
  Rule_Remove("Animate_MothershipDoorOpen")  
end

function Animate_MothershipDoorClose() 
  SobGroup_SetMadState("hgn_mothership0", "NIS01")
  Rule_Remove("Animate_MothershipDoorClose")  
end  

function test()
  --SobGroup_CreateShip("hgn_commandfortress2", "hgn_nuclearbomb")
  --Player_SetPlayerName(2, "Vaygr Armada")
  --Universe_SlowDown(0.96,12) 
  --Subtitle_Message("||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||", 3) 
  --CPU_Enable(1,0)
  --research[2].Time = 1
  --Sound_SpeechPlay("Data:sound/sfx/ui/sensorsmanager/worldplanewhoosh")
  --Sensors_FlashWorldPlane(1) 
  --FX_StartEvent("megalitenoowner", "Gate_Trigger")
  --FX_StartEvent("megalitenoowner", "Trench")
  --FX_PlayEffectBetweenPoints("pro_tech_beam_combo", "hgn_mothership0", "hgn_shipyard0", 10) -- non va
  --SobGroup_DockSobGroupInstant("hgn_marinefrigate0", "planet1") 
  --SobGroup_DockSobGroupAndStayDocked("hgn_marinefrigate0", "planet1")
  --if SobGroup_HealthPercentage("hgn_resourcecollector0") > 0.2 then
    --SobGroup_TakeDamage("hgn_resourcecollector0", 0.1) 
  --end 
  --if SobGroup_HealthPercentage("hgn_assaultcorvette0") > 0.2 then
    --SobGroup_TakeDamage("hgn_assaultcorvette0", 0.1) 
  --end  
  --if SobGroup_HealthPercentage("hgn_interceptor0") > 0.2 then
    --SobGroup_TakeDamage("hgn_interceptor0", 0.1) 
  --end   
  --SobGroup_TakeDamage("Player_Ships0", 0.02) 
  --UI_SetScreenEnabled("rurace", 1)		
	--UI_SetScreenVisible("rurace", 1)	
  --UI_SetTextLabelText("rurace", "lblDescription1", ResearchData[1].ResearchShipExponent);
  --UI_SetTextLabelText("rurace", "lblDescription2", nbc);  
  --if SobGroup_FillProximitySobGroup ("temp", "Player_Ships2", "hgn_mothership0", 12000) == 1 then 
    --SobGroup_SetHealth("temp", 0)
    --SobGroup_SetHealth("hgn_mothership0", 0.1)    
  --end  
  --if SobGroup_FillProximitySobGroup ("temp1", "Player_Ships2", "hgn_mothership1", 12000) == 1 then 
    --SobGroup_SetHealth("Player_Ships0", 0.9)
  --end
  --SobGroup_Clear("temp")
  --SobGroup_Clear("temp1")
  --Player_GrantResearchOption( 1 , "ImprovedTorpedoCruiser" )
  --Player_GrantResearchOption( 1 , "ImprovedTorpedoCruiser1" )  
  --SobGroup_DockSobGroupInstant("hgn_mothership0", "hgn_shipyard0") 
  --Player_Research( 1 , "ImprovedTorpedoDestroyer" )
  --SobGroup_CreateSubSystem("vgr_battlecruiser1", "Vgr_dt3_turret_light")
  --FX_StartEvent("hgn_resourcecontroller0", "Fusion4")
  --SobGroup_Create("hgn_scaver0") 
  --SobGroup_FillShipsByType("hgn_scaver0", "Player_Ships0", "hgn_scaver")  
  --SobGroup_SetHealth("hgn_scaver0", 0.5)
  --SobGroup_SwitchOwner( "hgn_scaver0", 1)

  --SobGroup_AvoidanceIgnore("hgn_resourcecollector0", "hgn_mothership0")     
  --SobGroup_ForceStayDockedIfDocking("hgn_researchstation0")
  --if SobGroup_IsDockedSobGroup("hgn_researchstation0", "hgn_mothership0") == 1 then
    --SobGroup_MakeSelectable("hgn_researchstation0", 0)
    --SobGroup_AbilityActivate("hgn_researchstation0", AB_Builder, 1) 
    --SobGroup_AbilityActivate("hgn_researchstation0", AB_Hyperspace, 1)     
  --else
    --SobGroup_MakeSelectable("hgn_researchstation0", 1)  
  --end   
  --Rule_Remove("test")
end  
function test1()  
  --SobGroup_SetHealth("Player_Ships0", 1)    
  --Rule_Remove("test")
end



--fighters
						if Player_HasResearch(playerIndex, "fightersquadron7") == 0 then             
							if (NeededPilots[playerIndexList] < 5) then
								if (canbuildinterceptor[playerIndexList] == 0) then            
									Player_RestrictBuildOption(playerIndex, "hgn_interceptor")
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptor1")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomber")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomber1")
									Player_RestrictBuildOption(playerIndex, "hgn_lbomber")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomber1")
									Player_RestrictBuildOption(playerIndex, "hgn_railgunfighter")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighter1")
									Player_RestrictBuildOption(playerIndex, "hgn_hft")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hft1")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavy")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavy1")
									canbuildinterceptor[playerIndexList] = 1
								end								
							elseif (NeededPilots[playerIndexList] >= 5) then
								if (canbuildinterceptor[playerIndexList] == 1) then
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptor")
									Player_RestrictBuildOption(playerIndex, "hgn_interceptor1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomber")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomber1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomber")
									Player_RestrictBuildOption(playerIndex, "hgn_lbomber1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighter")
									Player_RestrictBuildOption(playerIndex, "hgn_railgunfighter1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hft")
									Player_RestrictBuildOption(playerIndex, "hgn_hft1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavy")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavy1")
									canbuildinterceptor[playerIndexList] = 0
								end								
							end
						else	          
							if (NeededPilots[playerIndexList] < 7) then	          
								if (bloccofightersquadron[playerIndexList] == 0) then	   
									if (NeededPilots[playerIndexList] < 5) then
										if (canbuildinterceptor[playerIndexList] == 1) then  			          
											Player_RestrictBuildOption(playerIndex, "hgn_interceptor1") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_attackbomber1") 		   	         	       
											Player_RestrictBuildOption(playerIndex, "hgn_lbomber1") 
											Player_RestrictBuildOption(playerIndex, "hgn_railgunfighter1") 	         
											Player_RestrictBuildOption(playerIndex, "hgn_hft1") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavy1")			
										end  
									else
										if (canbuildinterceptor[playerIndexList] == 0) then
											Player_RestrictBuildOption(playerIndex, "hgn_interceptor") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_attackbomber") 		   	         	       
											Player_RestrictBuildOption(playerIndex, "hgn_lbomber") 
											Player_RestrictBuildOption(playerIndex, "hgn_railgunfighter") 	         
											Player_RestrictBuildOption(playerIndex, "hgn_hft") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavy") 
										end  
									end  	        
									bloccofightersquadron[playerIndexList] = 1				        
									canbuildinterceptor[playerIndexList] = 1																
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptorl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomberl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighterl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hftl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavyl1")								
								end 	          
								if (canbuildinterceptor[playerIndexList] == 0) then            
									Player_RestrictBuildOption(playerIndex, "hgn_interceptorl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptorl1")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberl1")
									Player_RestrictBuildOption(playerIndex, "hgn_lbomberl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomberl1")
									Player_RestrictBuildOption(playerIndex, "hgn_railgunfighterl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighterl1")
									Player_RestrictBuildOption(playerIndex, "hgn_hftl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hftl1")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavyl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavyl1")
									canbuildinterceptor[playerIndexList] = 1
								end
							elseif (NeededPilots[playerIndexList] >= 7) then
								if (bloccofightersquadron[playerIndexList] == 0) then	       
									if (canbuildinterceptor[playerIndexList] == 0) then   
										Player_RestrictBuildOption(playerIndex, "hgn_interceptor") 	 
										Player_RestrictBuildOption(playerIndex, "hgn_attackbomber") 		   	         	       
										Player_RestrictBuildOption(playerIndex, "hgn_lbomber") 
										Player_RestrictBuildOption(playerIndex, "hgn_railgunfighter") 	         
										Player_RestrictBuildOption(playerIndex, "hgn_hft") 	 
										Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavy") 				        	        
									end  
									bloccofightersquadron[playerIndexList] = 1				        
									canbuildinterceptor[playerIndexList] = 0																
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptorl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomberl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighterl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hftl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavyl")								
								end 	          	          
								if (canbuildinterceptor[playerIndexList] == 1) then
									Player_UnrestrictBuildOption(playerIndex, "hgn_interceptorl")
									Player_RestrictBuildOption(playerIndex, "hgn_interceptorl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberl")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_lbomberl")
									Player_RestrictBuildOption(playerIndex, "hgn_lbomberl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_railgunfighterl")
									Player_RestrictBuildOption(playerIndex, "hgn_railgunfighterl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_hftl")
									Player_RestrictBuildOption(playerIndex, "hgn_hftl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_attackbomberheavyl")
									Player_RestrictBuildOption(playerIndex, "hgn_attackbomberheavyl1")
									canbuildinterceptor[playerIndexList] = 0
								end								
							end  
						end  						
	          --corvettes
						if Player_HasResearch(playerIndex, "corvettesquadron5") == 0 then             
							if (NeededPilots[playerIndexList] < 6) then	            
								if (canbuildgunship[playerIndexList] == 0) then    
									Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvette")
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvette1")							
									Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvette")
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvette1")
									Player_RestrictBuildOption(playerIndex, "hgn_bombervette")
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervette1")
									canbuildgunship[playerIndexList] = 1
								end	        
							elseif (NeededPilots[playerIndexList] >= 6) then  		          
								if (canbuildgunship[playerIndexList] == 1) then       
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvette")
									Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvette1")							
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvette")
									Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvette1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervette")
									Player_RestrictBuildOption(playerIndex, "hgn_bombervette1")
									canbuildgunship[playerIndexList] = 0
								end
							end
							
							if (NeededPilots[playerIndexList] < 9) then
								if (canbuildmultigun[playerIndexList] == 0) then  
									Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvette")
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvette1")
									Player_RestrictBuildOption(playerIndex, "hgn_cth")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cth1")
									Player_RestrictBuildOption(playerIndex, "hgn_cthion")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthion1")
									canbuildmultigun[playerIndexList] = 1
								end								
							elseif (NeededPilots[playerIndexList] >= 9) then  
								if (canbuildmultigun[playerIndexList] == 1) then  
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvette")
									Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvette1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cth")
									Player_RestrictBuildOption(playerIndex, "hgn_cth1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthion")
									Player_RestrictBuildOption(playerIndex, "hgn_cthion1")
									canbuildmultigun[playerIndexList] = 0
								end								
							end
							
						else
							if (NeededPilots[playerIndexList] < 10) then	          
								if (bloccocorvettesquadron[playerIndexList] == 0) then	   
									if (NeededPilots[playerIndexList] < 6) then  	
										if (canbuildgunship[playerIndexList] == 1) then		          
											Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvette1") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvette1")
											Player_RestrictBuildOption(playerIndex, "hgn_bombervette1")										
										end     	         	       					        
									else
										if (canbuildgunship[playerIndexList] == 0) then  
											Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvette") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvette") 	
											Player_RestrictBuildOption(playerIndex, "hgn_bombervette") 	
										end  	        
									end  	        
									bloccocorvettesquadron[playerIndexList] = 1				        
									canbuildgunship[playerIndexList] = 1																										
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvettel1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvettel1")	
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervettel1")								
								end 
								if (canbuildgunship[playerIndexList] == 0) then      
									Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvettel1")
									Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvettel1")
									Player_RestrictBuildOption(playerIndex, "hgn_bombervettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervettel1")
									canbuildgunship[playerIndexList] = 1
								end		               
							elseif (NeededPilots[playerIndexList] >= 10) then  	     
								if (bloccocorvettesquadron[playerIndexList] == 0) then	  
									if (canbuildgunship[playerIndexList] == 0) then          
										Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvette") 	 
										Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvette") 	
										Player_RestrictBuildOption(playerIndex, "hgn_bombervette") 									
									end  	        	        
									bloccocorvettesquadron[playerIndexList] = 1				        
									canbuildgunship[playerIndexList] = 0										
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvettel")	
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervettel")										
								end 	
								if (canbuildgunship[playerIndexList] == 1) then        
									Player_UnrestrictBuildOption(playerIndex, "hgn_assaultcorvettel")
									Player_RestrictBuildOption(playerIndex, "hgn_assaultcorvettel1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_pulsarcorvettel")
									Player_RestrictBuildOption(playerIndex, "hgn_pulsarcorvettel1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_bombervettel")
									Player_RestrictBuildOption(playerIndex, "hgn_bombervettel1")
									canbuildgunship[playerIndexList] = 0
								end		            	    
							end 
							
							if (NeededPilots[playerIndexList] < 15) then	          
								if (bloccocorvettesquadron1[playerIndexList] == 0) then	   
									if (NeededPilots[playerIndexList] < 9) then
										if (canbuildmultigun[playerIndexList] == 1) then  			          
											Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvette1") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_cth1") 		
											Player_RestrictBuildOption(playerIndex, "hgn_cthion1") 	
										end  	   	         	       					        
									else
										if (canbuildmultigun[playerIndexList] == 0) then
											Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvette") 	 
											Player_RestrictBuildOption(playerIndex, "hgn_cth") 		
											Player_RestrictBuildOption(playerIndex, "hgn_cthion") 
										end  		        
									end  	        
									bloccocorvettesquadron1[playerIndexList] = 1				        
									canbuildmultigun[playerIndexList] = 1																								
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvettel1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthl1")	
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthionl1")										
								end 
								if (canbuildmultigun[playerIndexList] == 0) then  
									Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvettel1")
									Player_RestrictBuildOption(playerIndex, "hgn_cthl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthl1")
									Player_RestrictBuildOption(playerIndex, "hgn_cthionl")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthionl1")
									canbuildmultigun[playerIndexList] = 1
								end								
							elseif (NeededPilots[playerIndexList] >= 15) then  	     
								if (bloccocorvettesquadron1[playerIndexList] == 0) then	
									if (canbuildmultigun[playerIndexList] == 0) then        
										Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvette") 	 
										Player_RestrictBuildOption(playerIndex, "hgn_cth") 		
										Player_RestrictBuildOption(playerIndex, "hgn_cthion")   
									end    	        
									bloccocorvettesquadron1[playerIndexList] = 1				        
									canbuildmultigun[playerIndexList] = 0													
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvettel")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthl")	
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthionl")					
								end 	
								if (canbuildmultigun[playerIndexList] == 1) then  
									Player_UnrestrictBuildOption(playerIndex, "hgn_multiguncorvettel")
									Player_RestrictBuildOption(playerIndex, "hgn_multiguncorvettel1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthl")
									Player_RestrictBuildOption(playerIndex, "hgn_cthl1")
									Player_UnrestrictBuildOption(playerIndex, "hgn_cthionl")
									Player_RestrictBuildOption(playerIndex, "hgn_cthionl1")
									canbuildmultigun[playerIndexList] = 0
								end								
							end      
						end    
						
						
						function buildonstartmovies()  	
  Subtitle_Message("COMPLEX 9.0.1, Benchmark" .. traininglevel, 15)
	local playerIndex = 0                         
  while playerIndex < Universe_PlayerCount() do
    if Player_IsAlive(playerIndex) == 1 then
      if Player_HasShipWithBuildQueue(playerIndex) == 1 then   
        if ( Player_GetRace(playerIndex) == Race_Hiigaran ) then 
				  --research
          if Player_HasResearch(playerIndex, "nuclear4") == 0 then		
					  Player_GrantResearchOption(playerIndex , "nuclear4") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoDestroyerIcon") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoCruisera") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoCruiserb") 
						Player_GrantResearchOption(playerIndex , "ImprovedShieldCruiserIcon") 					
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoSmasher") 	
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoArk") 									
						Player_GrantResearchOption(playerIndex , "FighterHealthUpgrade3") 		
						Player_GrantResearchOption(playerIndex , "CorvetteHealthUpgrade3") 		
						Player_GrantResearchOption(playerIndex , "FrigateHealthUpgrade2") 		
						Player_GrantResearchOption(playerIndex , "PlatformHealthUpgrade2") 	
						Player_GrantResearchOption(playerIndex , "ArmedCapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "ArmedCapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "ArmedCapitalDriveUpgrade3")	
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalDriveUpgrade3")					  					
						Player_GrantResearchOption(playerIndex , "CapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "CapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "CapitalDriveUpgrade3")					
						Player_GrantResearchOption(playerIndex , "SensorsUpgrade3")	
          end 					
				  --ship creation	
          if traininglevel > 3 then					
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_vortex")
					end	
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_cruisera")
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_cruiserb")	
          SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_advdestroyer")					
          for z = 1,2,1 do 					
						SobGroup_CreateShip("Player_Ships"..playerIndex, "hgn_bombervette")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_multiguncorvette")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_cth")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_hft")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_attackbomberheavy")		
            SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_ioncannonfrigate")	
            SobGroup_CreateShip("Player_Ships"..playerIndex, "Hgn_assaultfrigate")
					end
        else
				  --research
          if Player_HasResearch(playerIndex, "ImprovedTorpedoDestroyer") == 0 then	
					  Player_GrantResearchOption(playerIndex , "ImprovedTorpedoDestroyer") 		
						Player_GrantResearchOption(playerIndex , "MineDestroyer") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoPulseDestroyer") 		
						Player_GrantResearchOption(playerIndex , "MinePulseDestroyer") 						
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoCruiser") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoCruiser1") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoLightCruiser") 		
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoBattleCarrier")
						Player_GrantResearchOption(playerIndex , "ImprovedTorpedoBattleship") 		
						Player_GrantResearchOption(playerIndex , "MineBattleship") 		
						Player_GrantResearchOption(playerIndex , "FreackerBattleship") 		
						Player_GrantResearchOption(playerIndex , "CoordinatedWeaponLongRangeArtilleryFrigate") 					
						Player_GrantResearchOption(playerIndex , "FighterHealthUpgrade3") 		
						Player_GrantResearchOption(playerIndex , "CorvetteHealthUpgrade3") 		
						Player_GrantResearchOption(playerIndex , "FrigateHealthUpgrade2") 		
						Player_GrantResearchOption(playerIndex , "PlatformHealthUpgrade2") 	
						Player_GrantResearchOption(playerIndex , "ArmedCapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "ArmedCapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "ArmedCapitalDriveUpgrade3")	
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "SuperArmedCapitalDriveUpgrade3")										
						Player_GrantResearchOption(playerIndex , "CapitalHealthUpgrade1") 
						Player_GrantResearchOption(playerIndex , "CapitalSpeedUpgrade3")	
						Player_GrantResearchOption(playerIndex , "CapitalDriveUpgrade3")					
						Player_GrantResearchOption(playerIndex , "SensorsUpgrade3")
          end 					
				  --ship
          if traininglevel > 3 then					
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_alkhalid")         	
					end	
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_cruiser")
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_pulsedestroyer")		       		
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_destroyer")
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_LightCruiser")
					SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_ArtilleryShip")
					for z = 1,2,1 do 					
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_striker")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_EliteFighter")
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_missilebomber")			
						SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_AdvAssaultFrigate")
					  SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_SupportFrigate_laser")		
            SobGroup_CreateShip("Player_Ships"..playerIndex, "Vgr_LongRangeArtilleryFrigate")	   
					end
				end				
      end
    end
    playerIndex = playerIndex + 1
  end    			
	Rule_Remove("buildonstartmovies") 	
	Rule_AddInterval("buildonstartmovies1", 50)
end  

function buildonstartmovies1()  	  
	local playerIndex = 0                         
  while playerIndex < Universe_PlayerCount() do
    if Player_IsAlive(playerIndex) == 1 then
      if Player_HasShipWithBuildQueue(playerIndex) == 1 then   
        if ( Player_GetRace(playerIndex) == Race_Hiigaran ) then 				  
					--subs
          if SobGroup_Count("hgn_mothership"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Production_Fighter")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Production_Corvette")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Production_Frigate")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Production_CapShip")   
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Module_drive")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Module_Repair")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Module_DefenseField")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Module_Hyperspace")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "Hgn_MS_Sensors_AdvancedArray")						
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_ms_module_defensefield1")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_MothershipCannon1")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_ms_torpedolauncher1")
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_cf_rapid1_ms")  
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "poh2")  						
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "supplyms")  
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "supplyms1")  
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_power_ms")   
            SobGroup_CreateSubSystem("hgn_mothership"..playerIndex, "hgn_power_ms1")   						
          end  			
          if SobGroup_Count("hgn_shipyard_g"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Production_Fighter")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Production_Corvette")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Production_Frigate")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_SY_Production_CapShip")   
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Module_drive")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Module_Repair")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Module_DefenseField")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Module_Hyperspace")
						SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_SY_Module_PlatformControl")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Module_build")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "Hgn_MS_Sensors_AdvancedArray")						
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "hgn_balkancannon")						
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "shield")						
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "hgn_gujkingcannonblaster")
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "hgn_pulser")  
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "hgn_pulser2")  
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "bs1")  						
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "supplyms")  
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "supplyms1")  
            SobGroup_CreateSubSystem("hgn_shipyard_g"..playerIndex, "hgn_power_ms")               						
          end  			
          if SobGroup_Count("hgn_battleshipyard"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_battleshipyard"..playerIndex, "hgn_bsy_production_capship")
            SobGroup_CreateSubSystem("hgn_battleshipyard"..playerIndex, "hgn_bsy_production_fighter")
            SobGroup_CreateSubSystem("hgn_battleshipyard"..playerIndex, "hgn_bsy_production_frigate")
            SobGroup_CreateSubSystem("hgn_battleshipyard"..playerIndex, "hgn_bsy_production_corvette")   
            SobGroup_CreateSubSystem("hgn_battleshipyard"..playerIndex, "Hgn_MS_Module_drive")
					end  			 					
          if SobGroup_Count("hgn_crewstation"..playerIndex) >= 1 then 
            SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_PilotModule")  
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_PilotModule1")
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_PilotModule2")
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_PilotModule3")
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_PilotModule4")		        
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_OfficerModule")
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_OfficerModule1")	
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_OfficerModule2")		
		        SobGroup_CreateSubSystem("hgn_crewstation"..playerIndex, "Hgn_OfficerModule3")
          end 
          if SobGroup_Count("hgn_researchstation"..playerIndex) >= 1 then    
					  SobGroup_CreateSubSystem("hgn_researchstation"..playerIndex, "Hgn_MS_Module_Research")		
		        SobGroup_CreateSubSystem("hgn_researchstation"..playerIndex, "Hgn_MS_Module_ResearchAdvanced")							
          end    
          if SobGroup_Count("hgn_power"..playerIndex) >= 1 then  
					  for w = 1,9,1 do							  
							SobGroup_CreateSubSystem("hgn_power"..playerIndex, "Hgn_power_m"..w)
            end		
          end   
          if SobGroup_Count("hgn_scaver"..playerIndex) >= 1 then
            for w = 1,4,1 do					
							SobGroup_CreateSubSystem("hgn_scaver"..playerIndex, "Supply"..w)		
            end			
          end  
          if SobGroup_Count("hgn_vortex"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "Hgn_C_Module_drive")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_vhcannonx3")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_pulsers1bc")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_pulsers2bc")  
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_pulsers3bc")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_pulsers4bc")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_v_torpedolauncher")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_v_torpedolauncher1")  
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_v_torpedolauncher2") 
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_v_torpedolauncher3")
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_miner")  
            SobGroup_CreateSubSystem("hgn_vortex"..playerIndex, "hgn_miner1")  										
          end    		
          if SobGroup_Count("hgn_battleship"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "Hgn_C_Module_drive")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "hgn_pulsers1bc")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "hgn_pulsers2bc")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "hgn_pulsers3bc")  
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "HGN_SCC_6xAC_Turret_s1bc")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "HGN_SCC_6xAC_Turret_s2bc")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "HGN_SCC_6xAC_Turret_s3bc")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "hgn_heavyion_sentinel1bc")  
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "hgn_heavyion_sentinel2bc") 
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "Hgn_HeavyGuidedPlasmaBombTubes2BS")
            SobGroup_CreateSubSystem("hgn_battleship"..playerIndex, "Hgn_HeavyGuidedPlasmaBombTubesBSRear")         						
          end  
					if SobGroup_Count("hgn_lighttanker"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_lighttanker"..playerIndex, "ftam")
            SobGroup_CreateSubSystem("hgn_lighttanker"..playerIndex, "ftam1")
            SobGroup_CreateSubSystem("hgn_lighttanker"..playerIndex, "ftam2")
            SobGroup_CreateSubSystem("hgn_lighttanker"..playerIndex, "hgn_s_nuclear")                           						
          end  
					if SobGroup_Count("hgn_spacecarrier"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_spacecarrier"..playerIndex, "hgn_rapidturret1")
            SobGroup_CreateSubSystem("hgn_spacecarrier"..playerIndex, "hgn_rapidturret2")                                      						
          end  
					if SobGroup_Count("hgn_battlecarrier"..playerIndex) >= 1 then  	
            SobGroup_CreateSubSystem("hgn_battlecarrier"..playerIndex, "Hgn_C_Production_Fighter")
            SobGroup_CreateSubSystem("hgn_battlecarrier"..playerIndex, "Hgn_SC_Production_Corvette")                                      						
            SobGroup_CreateSubSystem("hgn_battlecarrier"..playerIndex, "Hgn_SC_Production_Frigate")
            SobGroup_CreateSubSystem("hgn_battlecarrier"..playerIndex, "Hgn_SC_Production_Destroyer")   
            SobGroup_CreateSubSystem("hgn_battlecarrier"..playerIndex, "hgn_pulserbc2")                                              						
          end            
        else				  
					--subs
          if SobGroup_Count("vgr_alkhalid"..playerIndex) >= 1 then 
            SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "Vgr_C_Module_drive")  
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_lithiumion_port")
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_lithiumion_stbd")
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_lithiumion_stbd1")
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_lithiumion_port1")		        
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_dualflechette_port")
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_dualflechette_stbd")	
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_dualflechette_stbd1")		
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_dualflechette_port1")	
            SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_quadflechette_stbd")	
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_quadflechette_stbd1")		
		        SobGroup_CreateSubSystem("vgr_alkhalid"..playerIndex, "vgr_qje_quadflechette_stbd2")		
          end 
					if SobGroup_Count("vgr_commandfortress"..playerIndex) >= 1 then 
            SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "hgn_commandfortress_defencefacility")  
		        SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "vgr_qje_quadflechette_stbd_cf")
		        SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "vgr_ion1")
		        SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "missile_box")
		        SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "vgr_dt3_turret")		        
		        SobGroup_CreateSubSystem("vgr_commandfortress"..playerIndex, "hgn_commandfortress_comunicationfacility")		        
          end 
					if SobGroup_Count("vgr_battlecarrier"..playerIndex) >= 1 then 
            SobGroup_CreateSubSystem("vgr_battlecarrier"..playerIndex, "Vgr_C_Module_drive")  
		        SobGroup_CreateSubSystem("vgr_battlecarrier"..playerIndex, "Vgr_dt3_turret_light")
		        SobGroup_CreateSubSystem("vgr_battlecarrier"..playerIndex, "Vgr_dt3_turret_light1")		        
          end 
					if SobGroup_Count("vgr_scaver"..playerIndex) >= 1 then   
					  for w = 1,4,1 do					
							SobGroup_CreateSubSystem("vgr_scaver"..playerIndex, "Supply"..w)		
            end						
          end  
					if SobGroup_Count("vgr_artilleryship"..playerIndex) >= 1 then 
            SobGroup_CreateSubSystem("vgr_artilleryship"..playerIndex, "Vgr_cr_m")  		            
          end 			
				end				
      end
    end
    playerIndex = playerIndex + 1
  end    		
	--attack
  for z = 1,2,1 do
		for i = 0,npsa[z]-1,1 do          	
			if SobGroup_Empty("splitPlayer_Ships"..(z-1) .. tostring(i)) == 0 and SobGroup_IsDoingAbility("splitPlayer_Ships"..(z-1) .. tostring(i), AB_Attack) == 0 then
				if z == 1 then				  
					SobGroup_FillSubstract("temp", "Player_Ships1", "hgn_vortex1")					
					SobGroup_Attack(z-1, "splitPlayer_Ships"..(z-1) .. tostring(i), "temp")
				else				  
					SobGroup_FillSubstract("temp", "Player_Ships0", "hgn_vortex0")
					SobGroup_Attack(z-1, "splitPlayer_Ships"..(z-1) .. tostring(i), "temp")
				end		
			end	
		end
	end
	traininglevel = traininglevel + 1
	Rule_Remove("buildonstartmovies1") 		
	Rule_AddInterval("buildonstartmovies", 75)
end  
